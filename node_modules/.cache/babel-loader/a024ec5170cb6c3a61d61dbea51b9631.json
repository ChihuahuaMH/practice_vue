{"remainingRequest":"C:\\Users\\MH\\Desktop\\ortho\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\MH\\Desktop\\ortho\\client\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\MH\\Desktop\\ortho\\client\\src\\store\\index.js","mtime":1584601314015},{"path":"C:\\Users\\MH\\Desktop\\ortho\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\MH\\Desktop\\ortho\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlci9pbmRleC5qcyc7CmltcG9ydCB7IGFwaVVzZXJMb2dpbiwgYXBpR2V0VXNlciwgYXBpVXNlckxvZ291dCB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBvdmVybGF5OiBmYWxzZSwKICAgIGxvZ2luOiBmYWxzZSB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9naW4nKSwKICAgIHRva2VuOiBmYWxzZSB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSwKICAgIHVzZXI6IHsKICAgICAgbmFtZTogJycsCiAgICAgIGVtYWlsOiAnJwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRva2VuOiBmdW5jdGlvbiB0b2tlbigpIHsKICAgICAgaWYgKCFzdGF0ZS50b2tlbikgewogICAgICAgIHN0YXRlLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIH0KICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIGlmICghc3RhdGUubG9naW4pIHsKICAgICAgICBzdGF0ZS5sb2dpbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpbicpOwogICAgICB9CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldExvZ2luOiBmdW5jdGlvbiBzZXRMb2dpbihzdGF0ZSkgewogICAgICBzdGF0ZS5sb2dpbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpbicsIHRydWUpOwogICAgfSwKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgcmVzdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nLCByZXN0b2tlbik7CiAgICB9LAogICAganVtcFBhZ2U6IGZ1bmN0aW9uIGp1bXBQYWdlKCkgewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi8iCiAgICAgIH0pOwogICAgfSwKICAgIGp1bXBUb0xvZ2luOiBmdW5jdGlvbiBqdW1wVG9Mb2dpbigpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvbG9naW4iCiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoc3RhdGUsIG92ZXJsYXkpIHsKICAgICAgc3RhdGUub3ZlcmxheSA9IG92ZXJsYXk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDkvb/nlKjogIXnmbvlhaUKICAgIHVzZXJMb2dpbjogZnVuY3Rpb24gdXNlckxvZ2luKF9yZWYsIGluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBjb21taXQoImxvYWRpbmciLCB0cnVlKTsKICAgICAgYXBpVXNlckxvZ2luKHsKICAgICAgICBlbWFpbDogaW5mby5lbWFpbCwKICAgICAgICBwYXNzd29yZDogaW5mby5wYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibG9naW4iLCB0cnVlKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgY29tbWl0KCJzZXRMb2dpbiIpOwogICAgICAgIGNvbW1pdCgic2V0VG9rZW4iKTsKICAgICAgICBjb21taXQoImp1bXBQYWdlIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBhbGVydCgn5biz6Jmf5oiW5a+G56K86Yyv6Kqk77yM6KuL5YaN6Kmm5LiA5qyhJyk7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+W5b6X5L2/55So6ICFCiAgICBnZXRVc2VyOiBmdW5jdGlvbiBnZXRVc2VyKF9yZWYyKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICBhcGlHZXRVc2VyKHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICJiZWFyZXIgIi5jb25jYXQoc3RhdGUudG9rZW4pCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHN0YXRlLnVzZXIgPSByZXMuZGF0YS51c2VyOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g55m75Ye6CiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgYXBpVXNlckxvZ291dCh7fSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgc3RhdGUudG9rZW4gPSAiIjsKICAgICAgICBzdGF0ZS5sb2dpbiA9IGZhbHNlOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsb2dpbicpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIGNvbW1pdCgianVtcFRvTG9naW4iKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW9kdWxlczoge30KfSk7"},{"version":3,"sources":["C:/Users/MH/Desktop/ortho/client/src/store/index.js"],"names":["Vue","Vuex","router","apiUserLogin","apiGetUser","apiUserLogout","use","Store","state","overlay","login","localStorage","getItem","token","user","name","email","computed","mutations","setLogin","setToken","restoken","jumpPage","push","path","jumpToLogin","loading","actions","userLogin","info","commit","password","then","res","setItem","data","catch","err","alert","console","log","getUser","headers","logout","removeItem","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport router from '@/router/index.js'\n\nimport { apiUserLogin, apiGetUser, apiUserLogout } from \"@/api/login.js\";\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        overlay: false,\n        login: false || localStorage.getItem('login'),\n        token: false || localStorage.getItem('token'),\n        user: {\n            name: '',\n            email: '',\n        }\n    },\n    computed: {\n        token() {\n            if (!state.token) {\n                state.token = localStorage.getItem('token')\n            }\n        },\n        login() {\n            if (!state.login) {\n                state.login = localStorage.getItem('login')\n            }\n        }\n    },\n    mutations: {\n        setLogin(state) {\n            state.login = localStorage.getItem('login', true)\n        },\n        setToken(state, restoken) {\n            state.token = localStorage.getItem('token', restoken)\n        },\n        jumpPage() {\n            router.push({\n                path: `/`\n            });\n        },\n        jumpToLogin() {\n            router.push({\n                path: `/login`,\n            })\n        },\n        loading(state, overlay) {\n            state.overlay = overlay\n        }\n    },\n    actions: {\n        // 使用者登入\n        userLogin({ commit }, info) {\n            commit(\"loading\", true)\n            apiUserLogin({\n                    email: info.email,\n                    password: info.password\n                })\n                .then(res => {\n                    localStorage.setItem(\"login\", true);\n                    localStorage.setItem(\"token\", res.data.token)\n                    commit(\"setLogin\")\n                    commit(\"setToken\")\n                    commit(\"jumpPage\")\n                })\n                .catch(err => {\n                    alert('帳號或密碼錯誤，請再試一次')\n                    console.log(err);\n                });\n        },\n\n        // 取得使用者\n        getUser({ state }) {\n            apiGetUser({\n                headers: {\n                    'Authorization': `bearer ${state.token}`\n                }\n            }).then(res => {\n                console.log(res)\n                state.user = res.data.user\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n\n        // 登出\n        logout({ state, commit }) {\n            apiUserLogout({\n\n            }).then(res => {\n                state.token = \"\"\n                state.login = false\n                localStorage.removeItem('login')\n                localStorage.removeItem('token')\n                commit(\"jumpToLogin\")\n            }).catch(err => {\n                console.log(err)\n            })\n        },\n\n    },\n    modules: {}\n})"]}]}